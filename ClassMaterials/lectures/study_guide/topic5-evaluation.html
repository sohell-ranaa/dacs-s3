<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topic 5: Performance Evaluation - DACS Study Guide</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-content">
            <h1>DACS Study Guide</h1>
            <div>
                <a href="index.html">Home</a>
                <a href="topic4-preprocessing.html">Prev</a>
                <a href="topic6-algorithms.html">Next</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="breadcrumb">
            <a href="index.html">Home</a> &gt; <span>Topic 5: Performance Evaluation</span>
        </div>

        <div class="hero" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
            <h1>Topic 5: Performance Evaluation</h1>
            <p>Confusion matrix, metrics, ROC curves, and cross-validation</p>
        </div>

        <div class="section" id="confusion-matrix">
            <h2>The Confusion Matrix</h2>
            <div class="key-concept">
                <h4>What is a Confusion Matrix?</h4>
                <p>A table that presents both the class distribution and the classifier's predicted class distribution with a breakdown of error types.</p>
            </div>

            <div class="diagram">
                <svg width="550" height="350" viewBox="0 0 550 350">
                    <rect x="150" y="80" width="140" height="100" fill="#22c55e" stroke="#166534" stroke-width="2"/>
                    <rect x="290" y="80" width="140" height="100" fill="#ef4444" stroke="#991b1b" stroke-width="2"/>
                    <rect x="150" y="180" width="140" height="100" fill="#f97316" stroke="#c2410c" stroke-width="2"/>
                    <rect x="290" y="180" width="140" height="100" fill="#22c55e" stroke="#166534" stroke-width="2"/>

                    <text x="220" y="125" text-anchor="middle" fill="white" font-size="20" font-weight="bold">TP</text>
                    <text x="220" y="150" text-anchor="middle" fill="white" font-size="12">True Positive</text>
                    <text x="220" y="168" text-anchor="middle" fill="white" font-size="11">Correct!</text>

                    <text x="360" y="125" text-anchor="middle" fill="white" font-size="20" font-weight="bold">FP</text>
                    <text x="360" y="150" text-anchor="middle" fill="white" font-size="12">False Positive</text>
                    <text x="360" y="168" text-anchor="middle" fill="white" font-size="11">Type I Error</text>

                    <text x="220" y="225" text-anchor="middle" fill="white" font-size="20" font-weight="bold">FN</text>
                    <text x="220" y="250" text-anchor="middle" fill="white" font-size="12">False Negative</text>
                    <text x="220" y="268" text-anchor="middle" fill="white" font-size="11">Type II Error</text>

                    <text x="360" y="225" text-anchor="middle" fill="white" font-size="20" font-weight="bold">TN</text>
                    <text x="360" y="250" text-anchor="middle" fill="white" font-size="12">True Negative</text>
                    <text x="360" y="268" text-anchor="middle" fill="white" font-size="11">Correct!</text>

                    <text x="290" y="50" text-anchor="middle" fill="#1e293b" font-size="16" font-weight="bold">Predicted</text>
                    <text x="220" y="70" text-anchor="middle" fill="#1e293b" font-size="13">Positive</text>
                    <text x="360" y="70" text-anchor="middle" fill="#1e293b" font-size="13">Negative</text>

                    <text x="70" y="180" text-anchor="middle" fill="#1e293b" font-size="16" font-weight="bold" transform="rotate(-90 70 180)">Actual</text>
                    <text x="130" y="130" text-anchor="middle" fill="#1e293b" font-size="13">Positive</text>
                    <text x="130" y="230" text-anchor="middle" fill="#1e293b" font-size="13">Negative</text>

                    <rect x="150" y="300" width="20" height="15" fill="#22c55e"/>
                    <text x="180" y="312" fill="#1e293b" font-size="11">Correct Predictions</text>
                    <rect x="300" y="300" width="20" height="15" fill="#ef4444"/>
                    <text x="330" y="312" fill="#1e293b" font-size="11">Type I (FP)</text>
                    <rect x="400" y="300" width="20" height="15" fill="#f97316"/>
                    <text x="430" y="312" fill="#1e293b" font-size="11">Type II (FN)</text>
                </svg>
            </div>

            <div class="example-box">
                <h4>Perfect Classifier</h4>
                <p>For a perfect classifier: FP = FN = 0 (no Type I or Type II errors)</p>
                <p>For good accuracy: Diagonal entries (TP, TN) should be large, off-diagonal (FP, FN) close to zero.</p>
            </div>
        </div>

        <div class="section" id="metrics">
            <h2>Performance Metrics</h2>

            <div class="formula-box">
                <h4>Accuracy</h4>
                <div class="formula">\[ Accuracy = \frac{TP + TN}{TP + TN + FP + FN} \]</div>
                <p>Number of correct predictions / Total predictions</p>
            </div>

            <div class="formula-box">
                <h4>Precision</h4>
                <div class="formula">\[ Precision = \frac{TP}{TP + FP} \]</div>
                <p>Measure of classifier's <strong>exactness</strong>. Low precision = many false positives.</p>
                <p>Of all predicted positives, how many are actually positive?</p>
            </div>

            <div class="formula-box">
                <h4>Recall (Sensitivity / True Positive Rate)</h4>
                <div class="formula">\[ Recall = \frac{TP}{TP + FN} \]</div>
                <p>Measure of classifier's <strong>completeness</strong>. Low recall = many false negatives.</p>
                <p>Of all actual positives, how many did we correctly identify?</p>
            </div>

            <div class="formula-box">
                <h4>F1 Score (F-Measure)</h4>
                <div class="formula">\[ F1 = 2 \times \frac{Precision \times Recall}{Precision + Recall} \]</div>
                <p>Harmonic mean of precision and recall. Balances both metrics.</p>
            </div>

            <div class="warning-box">
                <h4>Accuracy Can Be Misleading!</h4>
                <p>If 96% of data is Class A, predicting everything as Class A gives 96% accuracy but is useless!</p>
                <p>For imbalanced data, use <strong>F1 Score</strong>, <strong>Balanced Accuracy</strong>, or <strong>Matthews Correlation Coefficient (MCC)</strong>.</p>
            </div>

            <div class="formula-box">
                <h4>Matthews Correlation Coefficient (MCC)</h4>
                <div class="formula">\[ MCC = \frac{TP \times TN - FP \times FN}{\sqrt{(TP+FP)(TP+FN)(TN+FP)(TN+FN)}} \]</div>
                <p>Range: -1 to +1 | +1 = perfect | 0 = random | -1 = total disagreement</p>
                <p>Best for imbalanced datasets!</p>
            </div>
        </div>

        <div class="section" id="roc">
            <h2>ROC Curve</h2>
            <div class="key-concept">
                <h4>What is ROC?</h4>
                <p>Receiver Operating Characteristic - plots True Positive Rate (TPR) vs False Positive Rate (FPR).</p>
                <ul>
                    <li><strong>X-axis:</strong> FPR = FP / (FP + TN)</li>
                    <li><strong>Y-axis:</strong> TPR = TP / (TP + FN) = Recall</li>
                </ul>
            </div>

            <div class="diagram">
                <svg width="400" height="350" viewBox="0 0 400 350">
                    <rect x="60" y="30" width="280" height="280" fill="#f8fafc" stroke="#e2e8f0"/>

                    <!-- Axes -->
                    <line x1="60" y1="310" x2="340" y2="310" stroke="#1e293b" stroke-width="2"/>
                    <line x1="60" y1="30" x2="60" y2="310" stroke="#1e293b" stroke-width="2"/>

                    <!-- Labels -->
                    <text x="200" y="340" text-anchor="middle" fill="#1e293b" font-size="12">False Positive Rate (FPR)</text>
                    <text x="25" y="170" text-anchor="middle" fill="#1e293b" font-size="12" transform="rotate(-90 25 170)">True Positive Rate (TPR)</text>

                    <!-- Diagonal (random) -->
                    <line x1="60" y1="310" x2="340" y2="30" stroke="#94a3b8" stroke-width="2" stroke-dasharray="5,5"/>
                    <text x="250" y="200" fill="#94a3b8" font-size="10">Random Guess</text>

                    <!-- Perfect classifier point -->
                    <circle cx="60" cy="30" r="8" fill="#22c55e"/>
                    <text x="85" y="45" fill="#22c55e" font-size="11" font-weight="bold">A: Perfect (0,1)</text>

                    <!-- Good ROC curve -->
                    <path d="M60 310 Q60 100 150 60 T340 30" stroke="#2563eb" stroke-width="3" fill="none"/>
                    <text x="140" y="100" fill="#2563eb" font-size="11" font-weight="bold">Good Classifier</text>

                    <!-- AUC shading -->
                    <path d="M60 310 Q60 100 150 60 T340 30 L340 310 Z" fill="#2563eb" opacity="0.1"/>

                    <!-- Key points -->
                    <text x="65" y="325" fill="#1e293b" font-size="10">0</text>
                    <text x="335" y="325" fill="#1e293b" font-size="10">1</text>
                    <text x="45" y="315" fill="#1e293b" font-size="10">0</text>
                    <text x="45" y="40" fill="#1e293b" font-size="10">1</text>
                </svg>
                <p class="diagram-caption">ROC Curve - Closer to top-left corner = better</p>
            </div>

            <table>
                <tr><th>Point</th><th>Location</th><th>Meaning</th></tr>
                <tr><td>A (Perfect)</td><td>FPR=0, TPR=1</td><td>No false positives, catches all positives</td></tr>
                <tr><td>B (Worst)</td><td>FPR=1, TPR=0</td><td>Gets everything wrong</td></tr>
                <tr><td>Diagonal</td><td>FPR=TPR</td><td>Random guessing</td></tr>
            </table>

            <div class="key-concept">
                <h4>AUC (Area Under Curve)</h4>
                <p>Summarizes ROC curve as a single number (0 to 1). Higher = better.</p>
                <p>AUC = 0.5 means random guessing | AUC = 1.0 means perfect classifier</p>
            </div>
        </div>

        <div class="section" id="bias-variance">
            <h2>Bias-Variance Tradeoff</h2>

            <div class="diagram">
                <svg width="700" height="200" viewBox="0 0 700 200">
                    <rect x="50" y="40" width="180" height="130" rx="10" fill="#ef4444"/>
                    <text x="140" y="80" text-anchor="middle" fill="white" font-weight="bold" font-size="16">UNDERFITTING</text>
                    <text x="140" y="105" text-anchor="middle" fill="white" font-size="12">High Bias</text>
                    <text x="140" y="125" text-anchor="middle" fill="white" font-size="12">Low Variance</text>
                    <text x="140" y="150" text-anchor="middle" fill="white" font-size="11">Model too simple</text>

                    <rect x="260" y="40" width="180" height="130" rx="10" fill="#22c55e"/>
                    <text x="350" y="80" text-anchor="middle" fill="white" font-weight="bold" font-size="16">GOOD FIT</text>
                    <text x="350" y="105" text-anchor="middle" fill="white" font-size="12">Balanced Bias</text>
                    <text x="350" y="125" text-anchor="middle" fill="white" font-size="12">Balanced Variance</text>
                    <text x="350" y="150" text-anchor="middle" fill="white" font-size="11">Just right!</text>

                    <rect x="470" y="40" width="180" height="130" rx="10" fill="#f59e0b"/>
                    <text x="560" y="80" text-anchor="middle" fill="white" font-weight="bold" font-size="16">OVERFITTING</text>
                    <text x="560" y="105" text-anchor="middle" fill="white" font-size="12">Low Bias</text>
                    <text x="560" y="125" text-anchor="middle" fill="white" font-size="12">High Variance</text>
                    <text x="560" y="150" text-anchor="middle" fill="white" font-size="11">Learns noise</text>
                </svg>
            </div>

            <table>
                <tr><th>Concept</th><th>Definition</th></tr>
                <tr><td><strong>Bias</strong></td><td>Simplifying assumptions that make learning easier. High bias = oversimplified model.</td></tr>
                <tr><td><strong>Variance</strong></td><td>How much predictions change with different training data. High variance = sensitive to training data.</td></tr>
                <tr><td><strong>Underfitting</strong></td><td>Model too simple, doesn't capture patterns (high bias)</td></tr>
                <tr><td><strong>Overfitting</strong></td><td>Model learns noise, doesn't generalize (high variance)</td></tr>
            </table>
        </div>

        <div class="section" id="cross-validation">
            <h2>Cross-Validation</h2>
            <div class="key-concept">
                <h4>Why Cross-Validation?</h4>
                <p>We often don't have enough data to be certain of population characteristics. CV is a resampling procedure to make best use of available samples.</p>
            </div>

            <h3>K-Fold Cross-Validation</h3>
            <div class="diagram">
                <svg width="700" height="180" viewBox="0 0 700 180">
                    <text x="50" y="30" fill="#1e293b" font-weight="bold">5-Fold CV Example:</text>

                    <!-- Fold 1 -->
                    <rect x="50" y="50" width="100" height="30" fill="#f59e0b"/>
                    <rect x="150" y="50" width="100" height="30" fill="#2563eb"/>
                    <rect x="250" y="50" width="100" height="30" fill="#2563eb"/>
                    <rect x="350" y="50" width="100" height="30" fill="#2563eb"/>
                    <rect x="450" y="50" width="100" height="30" fill="#2563eb"/>
                    <text x="580" y="70" fill="#1e293b" font-size="11">Fold 1</text>

                    <!-- Fold 2 -->
                    <rect x="50" y="85" width="100" height="30" fill="#2563eb"/>
                    <rect x="150" y="85" width="100" height="30" fill="#f59e0b"/>
                    <rect x="250" y="85" width="100" height="30" fill="#2563eb"/>
                    <rect x="350" y="85" width="100" height="30" fill="#2563eb"/>
                    <rect x="450" y="85" width="100" height="30" fill="#2563eb"/>
                    <text x="580" y="105" fill="#1e293b" font-size="11">Fold 2</text>

                    <!-- Fold 3 -->
                    <rect x="50" y="120" width="100" height="30" fill="#2563eb"/>
                    <rect x="150" y="120" width="100" height="30" fill="#2563eb"/>
                    <rect x="250" y="120" width="100" height="30" fill="#f59e0b"/>
                    <rect x="350" y="120" width="100" height="30" fill="#2563eb"/>
                    <rect x="450" y="120" width="100" height="30" fill="#2563eb"/>
                    <text x="580" y="140" fill="#1e293b" font-size="11">Fold 3...</text>

                    <!-- Legend -->
                    <rect x="50" y="160" width="20" height="12" fill="#2563eb"/>
                    <text x="80" y="170" fill="#1e293b" font-size="10">Train</text>
                    <rect x="130" y="160" width="20" height="12" fill="#f59e0b"/>
                    <text x="160" y="170" fill="#1e293b" font-size="10">Test/Validate</text>
                </svg>
            </div>

            <div class="key-concept">
                <h4>K-Fold CV Process</h4>
                <ol>
                    <li>Divide data into k folds (typically k=3, 5, or 10)</li>
                    <li>Train on k-1 folds, validate on remaining fold</li>
                    <li>Repeat k times (each fold is test once)</li>
                    <li>Report average performance across all folds</li>
                </ol>
                <p><strong>Advantage:</strong> All observations used for both training and validation.</p>
            </div>
        </div>

        <div class="section" id="random-state">
            <h2>Random State</h2>
            <div class="key-concept">
                <h4>Why random_state Matters</h4>
                <p>Most classifiers use randomness, producing slightly different models each run (stochastic behavior).</p>
                <p>Set <code>random_state</code> to a fixed value for <strong>reproducible results</strong>.</p>
            </div>
        </div>

        <div class="section" id="quiz">
            <h2>Self-Test Quiz</h2>
            <form class="quiz-form">
                <div class="quiz-question" data-answer="b">
                    <h4>1. FP (False Positive) is also known as:</h4>
                    <div class="quiz-options">
                        <label><input type="radio" name="q1" value="a"> Type II Error</label>
                        <label><input type="radio" name="q1" value="b"> Type I Error</label>
                        <label><input type="radio" name="q1" value="c"> True Error</label>
                        <label><input type="radio" name="q1" value="d"> Bias Error</label>
                    </div>
                </div>

                <div class="quiz-question" data-answer="c">
                    <h4>2. Recall is calculated as:</h4>
                    <div class="quiz-options">
                        <label><input type="radio" name="q2" value="a"> TP / (TP + FP)</label>
                        <label><input type="radio" name="q2" value="b"> (TP + TN) / Total</label>
                        <label><input type="radio" name="q2" value="c"> TP / (TP + FN)</label>
                        <label><input type="radio" name="q2" value="d"> TN / (TN + FP)</label>
                    </div>
                </div>

                <div class="quiz-question" data-answer="d">
                    <h4>3. For imbalanced datasets, the best metric is:</h4>
                    <div class="quiz-options">
                        <label><input type="radio" name="q3" value="a"> Accuracy alone</label>
                        <label><input type="radio" name="q3" value="b"> Only Precision</label>
                        <label><input type="radio" name="q3" value="c"> Only Recall</label>
                        <label><input type="radio" name="q3" value="d"> MCC or F1 Score</label>
                    </div>
                </div>

                <div class="quiz-question" data-answer="a">
                    <h4>4. A perfect classifier on an ROC curve appears at:</h4>
                    <div class="quiz-options">
                        <label><input type="radio" name="q4" value="a"> Top-left corner (FPR=0, TPR=1)</label>
                        <label><input type="radio" name="q4" value="b"> Bottom-right corner</label>
                        <label><input type="radio" name="q4" value="c"> On the diagonal</label>
                        <label><input type="radio" name="q4" value="d"> Top-right corner</label>
                    </div>
                </div>

                <button type="submit" class="btn">Check Answers</button>
            </form>
        </div>

        <div class="section">
            <h2>Key Takeaways</h2>
            <div class="key-concept">
                <h4>Formulas to Remember</h4>
                <ul>
                    <li>Accuracy = (TP + TN) / (TP + TN + FP + FN)</li>
                    <li>Precision = TP / (TP + FP)</li>
                    <li>Recall = TP / (TP + FN)</li>
                    <li>F1 = 2 × (Precision × Recall) / (Precision + Recall)</li>
                    <li>Type I Error = FP | Type II Error = FN</li>
                    <li>ROC: plots TPR vs FPR, AUC summarizes (higher = better)</li>
                    <li>Use F1 or MCC for imbalanced data</li>
                    <li>K-fold CV: train on k-1 folds, test on 1, repeat k times</li>
                </ul>
            </div>
        </div>

        <div style="display: flex; justify-content: space-between; margin-top: 2rem;">
            <a href="topic4-preprocessing.html" class="btn">Previous: Preprocessing</a>
            <a href="topic6-algorithms.html" class="btn">Next: ML Algorithms</a>
        </div>
    </div>
    <script src="js/main.js"></script>
</body>
</html>
